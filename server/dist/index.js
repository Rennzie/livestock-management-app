"use strict";var express=require("express"),app=express(),bodyParser=require("body-parser"),morgan=require("morgan"),mongoose=require("mongoose"),Router=require("./config/routes"),errorHandler=require("./lib/errorHandler"),_require=require("./config/environment"),PORT=_require.PORT,DB_URI=_require.DB_URI;mongoose.Promise=require("bluebird"),mongoose.connect(DB_URI,{useCreateIndex:!0,useNewUrlParser:!0}),app.use(express.static("".concat(__dirname,"/public"))),app.use(bodyParser.json()),app.use(morgan("dev")),app.use("/api",Router),app.get("/*",function(a,b){return b.sendFile("".concat(__dirname,"/public/index.html"))}),app.use(errorHandler),app.listen(PORT,function(){return console.log("Express is running on PORT ".concat(PORT))}),module.exports=app;